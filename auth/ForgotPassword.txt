title Quên mật khẩu

actor Actor
participant Mobile Application
participant Server
database Database

activate Actor
activate Mobile Application
activate Server

Actor->Mobile Application:1: Forgot password
Mobile Application-->>Actor:2: ForgotPasswordScreen()

loop Data Invalid
Actor->Mobile Application:3: Input email
Mobile Application->Mobile Application:4: validateInput()
Mobile Application-->>Actor:5: InvalidEmailInput()
end Data Valid
Mobile Application->Server:6: POST /api/users/forgot-password

alt Normal

Server->Database:7: checkEmailExists()
activate Database
Database-->>Server: 8: Result
deactivate Database
alt Email exists
Server-->>Actor: 9: sendResetPasswordToken()
Mobile Application<--Server: 10: message: "Email tồn tại, liên kết đặt lại mật khẩu đã được gửi."
Mobile Application->Actor: 11: showMessage()
else Email doesn't exist
Mobile Application<--Server: 12: error: "Email không hợp lệ."
Mobile Application->Actor: 13: showMessage()
end

else ServerError
Server-->Mobile Application: 14: error: "Đã xảy ra lỗi. Vui lòng thử lại sau."
Mobile Application->Actor: 15: showMessage()

end
  